<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-type" content="text/plain; charset=utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
  <title>TABLA REGISTROS DE VISITANTES</title>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
    integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
  <link rel="stylesheet" href="/resources/css/tablas.css" media="all">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <link rel="stylesheet"
    href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/1.10.13/css/jquery.dataTables.min.css">
  <script type="text/javascript" language="javascript" src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>
  <script type="text/javascript" language="javascript"
    src="https://cdn.datatables.net/1.10.13/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

  <script src="https://cdn.datatables.net/buttons/1.7.1/js/dataTables.buttons.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.6.0/jszip.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/1.7.1/js/buttons.html5.min.js"></script>

  <script
    src="https://cdn.jsdelivr.net/npm/datatables-buttons-excel-styles@1.1.5/js/buttons.html5.styles.min.js"></script>
  <script
    src="https://cdn.jsdelivr.net/npm/datatables-buttons-excel-styles@1.1.5/js/buttons.html5.styles.templates.min.js"></script>
  <link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.7.1/css/buttons.dataTables.min.css">
  <link type="image/x-icon"
    href="https://upload.wikimedia.org/wikipedia/commons/thumb/3/32/Escudo_de_Medell%C3%ADn_%28versi%C3%B3n_Alcald%C3%ADa%29.svg/1200px-Escudo_de_Medell%C3%ADn_%28versi%C3%B3n_Alcald%C3%ADa%29.svg.png"
    rel="icon" />

</head>

<body>
  <h2>TABLA <span class="text-muted">REGISTRO DE VISITANTES</span> </h2>
  <a href="/visitors" class="btn btn-outline-secondary">Regresar</a>
  <div class="table-responsive">
    <table id="example" class=" table table-striped table-ligth table-hover table-sm">
      <thead class="text-center">
        <tr>
          <th hidden>Id</th>
          <th>Nùmero de Documento</th>
          <th>Tipo de Documento</th>
          <th>Nombre Completo</th>
          <th>Secretarìa</th>
          <th>Ocupaciòn</th>
          <th>Sexo</th>
          <th>Fecha de nacimiento</th>
          <th>Edad</th>
          <th>Enfoque Diferencial</th>
          <th>Derechos</th>
          <th>Comuna o Corregimiento</th>
          <th>Correo</th>
          <th>Organizaciòn</th>
          <th>Telèfono</th>
          <th>lugar</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody >

        <% for(let regis of registro) {%>

          <%- include('./partials/visitorsRowData.ejs', {registro:regis}); %>

          <% } %>
      </tbody>
    </table>
  </div>
  <script>
    $(document).ready(function () {
      table = $('#example').DataTable({
      });
      //Creamos una fila en el head de la tabla y lo clonamos para cada columna
      $('#example thead tr').clone(true).appendTo('#example thead');

      $('#example thead tr:eq(1) th').each(function (i) {
        var title = $(this).text(); //es el nombre de la columna
        $(this).html('<input type="text" placeholder="Search...' + title + '" />');

        $('input', this).on('keyup change', function () {
          if (table.column(i).search() !== this.value) {
            table
              .column(i)
              .search(this.value)
              .draw();
          }
        });

      });

      table.destroy();

      $(document).ready(function () {
      const table =  $('#example').DataTable({
        
          orderCellsTop: true,
          destroy: true,
          fixedHeader: true,

          "language": {
            "url": "https://cdn.datatables.net/plug-ins/1.10.25/i18n/Spanish.json",
          },
          "dom": 'Bfrtlip',
          "buttons": {
            "dom": {
              "button": {
                "className": 'btn'
              }
            },
            "buttons": [{
              "extend": "excel",
              "text": '<i class="fas fa-file-excel"></i>',
              "className": 'btn btn-outline-success mb-1',
              "titleAttr": 'Exportar a Excel',
              "excelStyles": {
                "template": 'green_medium'
              }
            }]
          }
        })
      });
    }); 
  </script>
  <script src="//cdn.jsdelivr.net/npm/sweetalert2@10"></script>
  <script src="/resources/js/axiosVisitors/updateVisitors.js"></script>
  <script src="/resources/js/axiosVisitors/deleteVisitors.js"></script>
  <script src="/resources/js/axiosVisitors/updateVisitors.js"></script>


  <!--  <% if(typeof alert !="undefined" ){%>
    <script>
      Swal.fire({z
        title: '<%= title %>',
        icon: '<%= icon %>',
        showConfirmButton: '<%= showConfirmButton %>',
        timer: '<%= timer %>',
      }).then(() => {
        window.location = '/<%= ruta %>'
      })
    </script>
    <% } %>  -->
</body>

</html>